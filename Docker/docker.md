# Docker
## Docker 란?
**컨테이너 기반의 오픈소스 가상화 플랫폼**

![image](https://user-images.githubusercontent.com/54474501/133573449-8f31deab-bd6c-43f9-abbc-9b4552080624.png)

Docker는 소프트웨어를 컨테이너라는 표준화된 유닛으로 패키징하며, 이 컨테이너에는 라이브러리, 시스템 도구, 코드, 런타임 등 소프트웨어를 실행하는 데 필요한 모든 것이 포함되어 있습니다.
Docker를 사용하면 환경에 구애받지 않고 애플리케이션을 신속하게 배포 및 확장할 수 있으며 코드가 문제없이 실행된다.

## Container
컨테이너는 격리된 공간에서 프로세스가 동작하는 기술. 

### Compare
#### VMware & VirtualBox
VMware나 VirtualBox같은 가상머신은 호스트 OS위에 게스트 OS 전체를 가상화하여 사용하는 방식.
여러가지 OS를 가상화 할 수 있고 비교적 사용법이 간단하지만 무겁고 느려서 운영환경에선 사용할 수 없다.

#### KVM & Xen
게스트 OS가 필요하지만 전체 OS를 가상화하는 방식이 아니였기 때문에 호스트형 가상화 방식에 비해 성능이 향상되었다.

![image](https://user-images.githubusercontent.com/54474501/133574451-53b7b100-0505-422d-8851-681234ccf25e.png)

전가상화든 반가상화든 추가적인 OS를 설치하여 가상화하는 방법은 성능문제가 발생해서 이를 개선하기 위해서 **프로세스를 격리** 하는 방식이 등장합니다.

> 프로세스가 뭐지?
> [프로세스가 뭐지?](https://bowbowbow.tistory.com/16#%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EB%9E%80-%EB%8B%A8%EC%96%B4%EB%A5%BC-%EB%B3%B8%EC%A0%81%EC%9E%88%EB%82%98%EC%9A%94)

리눅스에서는 이 방식을 리눅스 컨테이너라고 하고 단순히 프로세스를 격리시키기 때문에 가볍고 빠르게 동작합니다. CPU나 메모리는 딱 프로세스가 필요한 만큼만 추가로 사용합니다.

#### Docker
##### VMware
- 위의 방법은 Host OS위에 Guest OS를 올려 사용하였다.
- 가상화된 하드웨어 위에 OS가 올라가는 형태로 거의 완벽하게 Host와 분리된다.(무겁고 느리다.)

##### Docker
- 반면 컨테이너 기반 가상화는 Docker 엔진 위에 Application 실행에 필요한 바이너리만 올리게 된다.
- Host의 커널을 공유하여 io처리가 쉽게 되어 성능의 효율을 높일 수 있다.
- 컨테이너를 사용하는 것은 가상 머신을 생성하는 것이 아니라 Host OS가 사용하는 자원을 분리하여 여러 환경을 만들 수 있도록 하는 것이다.

### 여러개의 컨테이너를 실행하는 경우
서로 영향을 미치지 않고 독립적으로 실행된다. 실행중인 컨테이너에 접속하여 명령어를 입력할 수 있고, apt-get이나 yum으로 패키지를 설치할 수 있으며 사용자도 추가하고 여러개의 프로세스를 백그라운드로 실행할 수 있다.

## Image
![image](https://user-images.githubusercontent.com/54474501/133576250-a5bfb0f9-88c3-4d04-ab3a-00c3736d8122.png)
컨테이너 실행에 필요한 파일과 설정값 등을 포함하고 있는 것.
상태값을 가지지 않고 변하지 않는다.
컨테이너는 이미지를 실행한 상태라고 볼 수 있고 추가되거나 변하는 값은 컨테이너에 저장된다. -> 이미지 위에 컨테이너가 실행된다.

> Ubuntu 이미지는 ubuntu를 실행하기 위한 모든 파일을 가지고 있고
> MySQL 이미지는 debian을 기반으로 MySQL을 실행하는데 필요한 파일과 실행 명령어, 포트 정보 등을 가지고 있습니다.

이미지는 컨테이너를 실행하기 위해서 필요한 기본적인 정보를 담는 공간. 이미지 위에서 컨테이너가 여러개 run 된다.

## 레이어 저장 방식
- 도커 이미지는 컨테이너를 실행하기 위한 모든 정보를 가지고 있기 때문에 보통 용량이 수백메가에 이른다. 기존 이미지에 파일 하나 추가했다고 수백메가를 다시 다운받는다면 매우 비효율적이다. 이를 해결하기 위해서 layer라는 개념을 사용하였다.
- 하나의 이미지를 실행하기 위해서 layer를 하나씩 이용한다. 여러 layer를 쌓아 하나의 이미지를 만들게 된다.
- 혹시 이미지에 다른 파일을 추가하게 된다면, 새로운 layer를 만들어 쌓아올린다.
- 컨테이너를 생성할 때도 레이어 방식을 사용한다. 컨테이너 레이어를 생성하기 전에 이미지 레이어 위에 읽기/쓰기 레이어를 추가한다.

## Docker의 장점
- 여러명의 개발자가 협력할 때 실행 환경을 동일하게 공유할 수 있다.
- 프로그램의 실행환경을 관리하기 위해서 docker를 이용한다.

## Docker hub
- 도커 이미지를 모아둔 곳
[ Link ](https://hub.docker.com/)
# Reference
[ 초보를 위한 도커 안내서 ](https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html)
[ Docker의 개념 및 핵심 설명 ](https://khj93.tistory.com/entry/Docker-Docker-%EA%B0%9C%EB%85%90)
[ docker ](https://kamang-it.tistory.com/entry/DockerDocker%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80-%EB%8F%84%EC%BB%A4%EC%9D%98-%EA%B8%B0%EC%B4%88%EC%99%80-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%84%A4%EC%B9%98%ED%95%98%EA%B3%A0-%EC%82%AC%EC%9A%A91)